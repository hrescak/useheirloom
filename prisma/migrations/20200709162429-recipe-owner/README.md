# Migration `20200709162429-recipe-owner`

This migration has been generated by Matej Hrescak at 7/9/2020, 4:24:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Recipe" ADD COLUMN "authorId" integer  NOT NULL DEFAULT 1;

ALTER TABLE "public"."Recipe" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200610141138-is-public..20200709162429-recipe-owner
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum Unit {
   TSP
@@ -39,8 +39,9 @@
   salt           String
   ownKitchen     Kitchen   @relation("KitchenOwnership")
   kitchens       Kitchen[] @relation(references: [id])
   starredRecipes Recipe[]
+  recipes        Recipe[] @relation("RecipeOwnership")
 }
 model Kitchen {
   id          Int        @default(autoincrement()) @id
@@ -57,9 +58,9 @@
   id                 Int      @default(autoincrement()) @id
   name               String?
   summary            String?
   publicID           String?   @unique
-  isPublic           Boolean   @default(false)
+  isPublic           Boolean   @default(value:false)
   sourceName         String?
   sourceURL          String?
   servings           Int?
   prepDuration       Int?
@@ -73,8 +74,10 @@
   instructions       String?
   isDeleted          Boolean  @default(value: false)
   categories   Category[]
   starredBy          User[]
+  author            User @relation("RecipeOwnership", references: [id], fields: [authorId])
+  authorId           Int @default(value:1) //before manually going through everyone
 }
 model Ingredient {
```
