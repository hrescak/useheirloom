# Migration `20200601212438-salthash`

This migration has been generated by Matej Hrescak at 6/1/2020, 9:24:38 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "avatarUrl" text  NOT NULL ,
ADD COLUMN "googleId" integer   ,
ADD COLUMN "hash" text  NOT NULL ,
ADD COLUMN "salt" text  NOT NULL ,
DROP COLUMN "name",
ADD COLUMN "name" text  NOT NULL ;

ALTER TABLE "public"."Post" DROP CONSTRAINT IF EXiSTS "Post_authorId_fkey";

CREATE UNIQUE INDEX "User.googleId" ON "public"."User"("googleId")

DROP TABLE "public"."Post";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200601165451-allfields..20200601212438-salthash
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum Unit {
   TSP
@@ -28,22 +28,16 @@
   PREPARATION
   SEASON
 }
-model Post {
-  id        Int     @default(autoincrement()) @id
-  title     String
-  content   String?
-  published Boolean @default(false)
-  author    User?   @relation(fields: [authorId], references: [id])
-  authorId  Int?
-}
-
 model User {
   id             Int        @default(autoincrement()) @id
   email          String     @unique
-  name           String?
-  posts          Post[]
+  name           String
+  googleId       Int? @unique
+  avatarUrl      String
+  hash           String
+  salt           String
   ownKitchen     Kitchen    @relation("KitchenOwnership")
   kitchens       Kitchen[]  @relation(references: [id])
   starredRecipes Recipe[]
   Category       Category[]
```


