# Migration `20200714221908-updated-at-step-two`

This migration has been generated by Matej Hrescak at 7/14/2020, 10:19:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Category" ALTER COLUMN "updatedAt" DROP DEFAULT;

ALTER TABLE "public"."Ingredient" ALTER COLUMN "updatedAt" DROP DEFAULT;

ALTER TABLE "public"."Kitchen" ALTER COLUMN "updatedAt" DROP DEFAULT;

ALTER TABLE "public"."Recipe" ALTER COLUMN "updatedAt" DROP DEFAULT;

ALTER TABLE "public"."RecipeIngredient" ALTER COLUMN "updatedAt" DROP DEFAULT;

ALTER TABLE "public"."User" ALTER COLUMN "updatedAt" DROP DEFAULT;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200714221555-updated-at-step-one..20200714221908-updated-at-step-two
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL1")
 }
 enum Unit {
   TSP
@@ -30,10 +30,10 @@
 }
 model User {
   id             Int       @default(autoincrement()) @id
-  createdAt          DateTime @default(now())
-  updatedAt          DateTime @updatedAt @default(now())
+  createdAt      DateTime  @default(now())
+  updatedAt      DateTime  @updatedAt
   email          String    @unique
   name           String
   googleId       Int?      @unique
   avatarUrl      String?
@@ -41,15 +41,15 @@
   salt           String
   ownKitchen     Kitchen   @relation("KitchenOwnership")
   kitchens       Kitchen[] @relation(references: [id])
   starredRecipes Recipe[]
-  recipes        Recipe[] @relation("RecipeOwnership")
+  recipes        Recipe[]  @relation("RecipeOwnership")
 }
 model Kitchen {
   id          Int        @default(autoincrement()) @id
-  createdAt          DateTime @default(now())
-  updatedAt          DateTime @updatedAt @default(now())
+  createdAt   DateTime   @default(now())
+  updatedAt   DateTime   @updatedAt
   name        String
   description String?
   owner       User       @relation("KitchenOwnership", references: [id], fields: [ownerId])
   ownerId     Int
@@ -58,52 +58,52 @@
   categories  Category[]
 }
 model Recipe {
-  id                 Int      @default(autoincrement()) @id
-  createdAt          DateTime @default(now())
-  updatedAt          DateTime @updatedAt @default(now())
+  id                 Int                @default(autoincrement()) @id
+  createdAt          DateTime           @default(now())
+  updatedAt          DateTime           @updatedAt
   name               String?
   summary            String?
-  publicID           String    @unique
-  isPublic           Boolean   @default(value:false)
+  publicID           String             @unique
+  isPublic           Boolean            @default(value: false)
   sourceName         String?
   sourceURL          String?
   servings           Int?
   prepDuration       Int?
   cookDuration       Int?
   totalDuration      Int?
-  kitchen            Kitchen  @relation(references: [id], fields: [kitchenId])
+  kitchen            Kitchen            @relation(references: [id], fields: [kitchenId])
   kitchenId          Int
   imageURL           String?
-  ingredients  RecipeIngredient[]
+  ingredients        RecipeIngredient[]
   ingredientSections String[]
   instructions       String?
-  isDeleted          Boolean  @default(value: false)
-  categories   Category[]
+  isDeleted          Boolean            @default(value: false)
+  categories         Category[]
   starredBy          User[]
-  author            User @relation("RecipeOwnership", references: [id], fields: [authorId])
-  authorId           Int @default(value:1) //before manually going through everyone
+  author             User               @relation("RecipeOwnership", references: [id], fields: [authorId])
+  authorId           Int                @default(value: 1) //before manually going through everyone
 }
 model Ingredient {
-  id       Int                @default(autoincrement()) @id
-  createdAt          DateTime @default(now())
-  updatedAt          DateTime @updatedAt @default(now())
-  name     String
-  category String
-  uses     RecipeIngredient[]
+  id        Int                @default(autoincrement()) @id
+  createdAt DateTime           @default(now())
+  updatedAt DateTime           @updatedAt
+  name      String
+  category  String
+  uses      RecipeIngredient[]
 }
 model RecipeIngredient {
-  id           Int        @default(autoincrement()) @id
-  createdAt          DateTime @default(now())
-  updatedAt          DateTime @updatedAt @default(now())
+  id           Int         @default(autoincrement()) @id
+  createdAt    DateTime    @default(now())
+  updatedAt    DateTime    @updatedAt
   freeform     String
   ingredient   Ingredient? @relation(references: [id], fields: [ingredientId])
   ingredientId Int?
-  recipe       Recipe     @relation(references: [id], fields: [recipeId])
+  recipe       Recipe      @relation(references: [id], fields: [recipeId])
   recipeId     Int
   priority     Float
   quantity     Float?
   unit         Unit?
@@ -111,12 +111,14 @@
 }
 model Category {
   id          Int          @default(autoincrement()) @id
-  createdAt          DateTime @default(now())
-  updatedAt          DateTime @updatedAt @default(now())
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @updatedAt
   name        String
   description String
   kitchen     Kitchen      @relation(references: [id], fields: [kitchenId])
   kitchenId   Int
   type        CategoryType
+  Recipe      Recipe?      @relation(fields: [recipeId], references: [id])
+  recipeId    Int?
 }
```
